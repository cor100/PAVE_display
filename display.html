<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test Display</title>
    <link rel="stylesheet" href="styles.css">
</head>
<script>
    function connectPhidgets(){
        fetch('test_csv.txt') 
        .then(response => response.text())
        .then(text => {
            var data = text.split("\n");
            var num = data[0].split(", ");
            document.getElementById("dataLabel").innerHTML = num[0];
            
            document.getElementById("rudder").innerHTML = "rudder angle: " + num[0];
            var rudder = document.getElementsByClassName("rudderColor");
            rudder[0].style.width=(num[0]+"%");

            document.getElementById("throttle").innerHTML = "throttle: " + num[0];
            var throttle = document.getElementsByClassName("throttleColor");
            throttle[0].style.width=(num[0]+"%");
        })
    }
</script>
    <body onload="connectPhidgets()">
        <section class = "container">
            <div class = "left-half">
                <table class = "center">
                    <tr>
                        <th>Get Set</th>
                        <th>Begin Race</th>
                        <th>End Race</th>
                        <th>Set Buoys</th>
                        <th>Donuts</th>
                    </tr>
                </table>
                <h1>TEST DISPLAY</h1>
                <h2 id="dataLabel">?</h2>
            </div>
            <div class = "right-half">
                <table class = "center">
                    <tr>
                        <th><img src = "andlinger.png" class = "sponsor"></th>
                        <th><img src = "council.png" class = "sponsor"></th>
                        <th><img src = "keller.png" class = "sponsor"></th>
                    </tr>
                </table>
                <section>
                    <h1 id="throttle">
                        throttle
                    </h1>
                    <div class="progress">
                        <div class="throttleColor"></div>
                      </div>                        
                      <h1 id="rudder">
                        rudder angle
                    </h1>
                    <div class="progress">
                        <div class="rudderColor"></div>
                      </div>                    
                    <h1>
                        control
                    </h1>
                    <table>
                        <tr>
                            <th>GPS</th>
                            <th>RC</th>
                            <th>Autonomous</th>
                        </tr>
                    </table>
                    <table class = "bottom center">
                        <tr>
                            <th>GPS</th>
                            <th>RC</th>
                        </tr>
                    </table>
                </section>
            </div>
        </section>
    </body>
</html>